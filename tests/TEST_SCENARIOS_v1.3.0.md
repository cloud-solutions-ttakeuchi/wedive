# テストシナリオ (v1.3.0) - Legal Compliance Flow

本ドキュメントは、v1.3.0リリースにおける「利用規約同意フロー (Legal Compliance)」の受け入れテストシナリオです。

## 概要

- **対象バージョン**: v1.3.0
- **機能**: Issue #12 Legal Compliance Flow
- **前提**: `CURRENT_TERMS_VERSION` は `1.0.0` とする。

---

## テストケース

### 1. 新規ユーザー登録 (New User)
- [ ] **TC-01: 新規登録時の同意フロー**
  - 新規Googleアカウントでログイン。
  - **期待値**: 「会員登録」モーダルが表示されること。「同意せずログアウト」ボタンが存在すること。
- [ ] **TC-02: 新規登録の中止**
  - 「同意せずログアウト」をクリックし、確認ダイアログでOKを選択。
  - **期待値**: ログアウトされ、トップページが表示されること。データ（ユーザー）が残っていないこと。
- [ ] **TC-03: 新規登録の完了**
  - 「利用規約」等のリンクを開き閲覧できること（モーダルが邪魔しないこと）。
  - 「同意して登録」をクリック。
  - **期待値**: モーダルが閉じ、アプリが利用可能になること。

### 2. 既存ユーザー更新 (Existing User)
- [ ] **TC-04: 規約更新時の再同意**
  - 既存アカウント（`agreedTermsVersion` が空、または `0.9.9` 等）でログイン。
  - **期待値**: 「利用規約の更新」モーダルが表示されること。「同意せず退会する」ボタンが存在すること。
- [ ] **TC-05: 退会処理**
  - 「同意せず退会する」をクリックし、確認ダイアログでOKを選択。
  - **期待値**: 全てのログデータとユーザー情報が削除され、ログアウトされること。
- [ ] **TC-06: 更新同意**
  - 「同意して続ける」をクリック。
  - **期待値**: モーダルが閉じ、ユーザー情報の `agreedTermsVersion` が `1.0.0` に更新されること。

### 3. アクセス制御
- [ ] **TC-07: 未ログイン時のアクセス**
  - シークレットウィンドウ等でトップページにアクセス。
  - **期待値**: モーダルが表示されず、コンテンツを閲覧できること。
- [ ] **TC-08: 規約ページへの直接アクセス**
  - 同意前の状態で `/terms` または `/privacy` にアクセス。
  - **期待値**: モーダルが表示されず、規約本文を閲覧できること。

---

## 完了基準

- 全てのテストケースで「期待値」を満たすこと。
- 重大なUI崩れや、アプリのクラッシュが発生しないこと。
