# 📱 アプリリリース・3ステップ計画：WeDive

## 📋 概要
本プロジェクト「WeDive」のアプリ版リリースに向けたロードマップ。
個人事業主としての効率を重視し、開発者テストから一般公開まで段階的に配布範囲を広げることで、品質確保と迅速なリリースを両立させる。

---

## 🚀 フェーズ1：開発者テスト（Expo Development Build）
**目標：最短で自分の実機にインストールし、全機能を検証する。**

### 📝 タスク
- [x] **Apple Developer Program 登録**
  - 個人事業主として、iOS実機配布に必要な年間登録（$99）を完了させる。
- [x] **EAS Build の設定**
  - `eas.json` に development（開発用）および production（本番用）プロファイルを設定済み。
- [x] **EAS Secrets の設定**
  - Firebase設定値などの環境変数をEASに登録済み。
- [x] **実機インストール用ビルド作成**
  - `eas build --profile development --platform ios` を実行し、実機での動作を確認済み。
- [x] **最新ロジックの疎通確認**
  - Firestore からのデータ取得（`usePoints`, `useCreatures`, `useHomeData`）が実機で正常に動作することを確認。
  - 「ポイント攻略率（マスタリー）」などのバックエンド計算も実機からのログ投稿で正常にトリガーされることを確認。

---

## 🧪 フェーズ2：クローズドβテスト（TestFlight）
**目標：特定のダイバー仲間に配布し、実際のフィールドでの利用感を確認する。**

### 📝 タスク
- [ ] **App Store Connect 設定**
  - アプリ名、アイコン、スプラッシュ画面を最終決定し、メタデータを登録する。
- [ ] **TestFlight 配信開始**
  - 内部テスター（自分）および外部テスター（協力ダイバー）に招待を送信する。
- [ ] **Cloud Functions の安定性確認**
  - 複数ユーザーが同時にログを記録した際の `userStatsTriggers.ts` によるマスタリー再計算の整合性を確認。
- [ ] **プライバシーポリシーの公開**
  - Firebaseに保存されるユーザーデータやダイビングログの取り扱いについて明記したページを用意する。

---

## 🌊 フェーズ3：一般公開（App Store / Google Play）
**目標：ストア審査を通過し、一般ユーザーがダウンロードできる状態にする。**

### 📝 タスク
- [ ] **本番用バイナリの最終ビルド**
  - `eas build --profile production` を実行し、審査用ビルドをアップロード。
- [ ] **ストア審査提出**
  - スクリーンショットと説明文を揃え、Apple/Googleの両ストアに審査をリクエスト。
- [ ] **パフォーマンス最適化**
  - `point_creatures` のデータ量増大に伴う Firestore 読み取りコストと、マスタリー計算ロジックの負荷を再評価する。
- [ ] **初期データの投入**
  - 伊豆や沖縄など、主要なダイビングポイントの生物マスターデータを整備し、新規ユーザーがすぐに楽しめる状態にする。

---

## 🛠 技術チェックリスト
- [ ] **Firebase 環境の分離**: 開発用と本番用プロジェクトの切り替え設定。
- [ ] **画像キャッシュ**: `ImageWithFallback` を使用した実機での画像表示速度の確認。
- [ ] **オフライン対応**: ダイビングポイント（電波の弱い場所）でのログ閲覧挙動の確認。
