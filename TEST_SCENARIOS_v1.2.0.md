# テストシナリオ (v1.2.0) - Garminデータインポート機能強化

本ドキュメントは、v1.2.0リリースにおけるGarminデータインポート機能強化（詳細インポート、重複除外、グラフ表示）の受け入れテストシナリオをまとめたものです。

## 概要

- **対象バージョン**: v1.2.0
- **主な変更点**:
  - インポートモード（詳細/簡易）の選択
  - 深度・水温・心拍数グラフの表示
  - 重複データのスマートマージ機能（スキップ/上書き/新規）
  - UI改善（ヘルプ表示、グラフレイアウト調整）

---

## テストケース

### 1. インポートモード選択 (Import Mode)

- [x] **TC-01: 詳細インポート (初期値)**
  - UIで「詳細インポート」がデフォルトで選択されていること。
  - ZIPファイルをアップロード・インポート後、詳細データ（グラフ）が表示されること。
  - **期待値**: ログ詳細に「詳細データ」セクションが表示され、グラフが描画される。

- [x] **TC-02: 簡易インポート**
  - UIで「簡易インポート」を選択できること。
  - インポート後、グラフデータが含まれていないこと（基本情報のみ）。
  - **期待値**: 処理が高速に完了し、ログ詳細に「詳細データ」セクションが表示されない。

- [x] **TC-03: ヘルプ表示**
  - 詳細インポートの横にある「？」アイコンをクリック（またはホバー）する。
  - **期待値**: サンプルグラフの画像ポップアップが表示されること。

- [x] **TC-04: CSVインポート機能**
  - GARMINのCSVデータをインポートできること
  - **期待値**: CSVのデータが正常に取り込まれること

### 2. 重複データ処理 (Deduplication / Smart Merge)

前提: 既に一度インポート済みのデータを含むZIPファイルを再度アップロードする。

- [x] **TC-05: 重複警告の表示**
  - プレビュー画面で「○件の重複データが見つかりました」という警告が表示されること。
  - 重複したログの行に「既存」または「Info」アイコンが表示されること。

- [x] **TC-06: スキップ (Skip) - デフォルト*
  - 重複処理で「スキップ」を選択してインポート実行。
  - **期待値**:
    - 完了アラートで「スキップ: ○件」と表示される。
    - 既存のログのデータ（コメントや写真など）が変更されていないこと。

- [x] **TC-07: 上書き (Overwrite)**
  - 重複処理で「上書き」を選択してインポート実行。
  - **期待値**:
    - 完了アラートで「更新: ○件」と表示される。
    - 既存のログのデータ（深度、水温、グラフデータ等）がZIPファイルの内容で更新されること。
    - *※手動で編集したコメント等が意図せず消えないか確認（現状の仕様ではGarminデータにある項目のみ上書き）*

- [x] **TC-08: 新規追加 (Create New)**
  - 重複処理で「新規として追加」を選択してインポート実行。
  - **期待値**:
    - 完了アラートで「新規追加: ○件」と表示される。
    - ログ一覧に同じ日時・内容のログが2つ存在すること。

### 3. データ可視化・グラフ (Data Visualization)

前提: 詳細インポートで取り込んだログ、「Garmin Connect」等で深度・水温・心拍数データが存在するログを使用。

- [x] **TC-09: 深度グラフ (初期表示)**
  - ログ詳細を開いた際、デフォルトで「深度」グラフが表示されること。
  - 縦軸（Y軸）が反転（0mが上）して表示されていること。

- [x] **TC-10: 水温グラフ切り替え**
  - 「水温」タブをクリック。
  - グラフがオレンジ色に切り替わること。
  - 縦軸のスケールが「平均水温 ±約10℃」の範囲で表示され、変化が見やすいこと（0℃から始まっていないこと）。

- [ ] **TC-11: 心拍数グラフ切り替え**  ※心拍数データがないためデータ確認不可
  - 「心拍数」タブをクリック。
  - グラフが赤色に切り替わること。
  - データが存在する場合、波形が表示されること。
  - データが存在しない場合、「データがありません」等のメッセージが表示されること。

- [x] **TC-12: グラフレイアウト・操作**
  - グラフにマウスオーバー（タップ）して、ツールチップで詳細な値（時間、深度/水温/心拍数）が表示されること。
  - ラベル（数値）が見切れていないこと、重なっていないこと。

---

## 完了基準


- 全てのテストケースで「期待値」を満たすこと。
- 重大なUI崩れや、アプリのクラッシュ（白い画面になる等）が発生しないこと。
