# WeDive プロジェクト開発ルール

このファイルは、AIアシスタント（Agent）の振る舞いを規定する絶対的なルールです。Agentは作業を開始する前に必ずこの中身を確認し、遵守しなければなりません。

## 1. コミュニケーション
- **会話は常に日本語で行うこと。**
- ユーザーにストレスを与えないよう、簡潔かつ正確な報告を心がける。

## 2. 実装と変更のプロセス
- **コードの実装、修正、ファイルの削除などの変更操作を行う際は、必ず事前にユーザーに内容を説明し、Goodボタンまたは文言にて許可を得ること。**
- 「よかれと思って」の独断による先回り作業、ロジックの変更、ファイルの削除は一切禁止する。
- ユーザーの意図を100%汲み取り、不明な点がある場合は勝手に推測せず必ず質問すること。
- 修正範囲は、ユーザーに許可を得た最小限の範囲に限定する。

## 3. 品質管理
- 既存の仕様（バッチサイズ、ループ構造、バリデーションなど）を尊重し、設計上の意図を壊さないこと。
- 変更を行った後は、必ずその内容がユーザーの指示と一致しているか再確認すること。
- 作業が終わったらCHANGELOG.md, RELEASE_NOTES.mdを更新すること。
- 実装が終わったらtests/ディレクトリにユニットテストを追加すること。
- feature flagを実装すること。feature flagは、必ずREADME.mdに説明を記載すること。
- データベースの管理は、必ずDATABASE_DESIGN.mdを参考にすること。
- データベースとIOが発生する場合は、必ずDATABASE_DESIGN.mdの仕様を確認すること。
- スキーマの更新が発生する作業は、必ずDATABASE_DESIGN.mdを更新すること。
- 新規にDBやテーブル（コレクション、ドキュメント含む）を追加する作業は、必ずDATABASE_DESIGN.mdを更新すること。
- インフラ設計は、必ずINFRASTRUCTURE.mdを参考にすること。
- インフラ設計の変更が発生する作業は、必ずINFRASTRUCTURE.mdを更新すること。
- 機能一覧は、必ずFUNCTIONALITY.mdを参考にすること。
- 機能一覧の変更が発生する作業は、必ずFUNCTIONALITY.mdを更新すること。
- DATABASE_DESIGN.md, INFRASTRUCTURE.md, FUNCTIONALITY.mdは日本語で事実のみを記載すること。
- 機能実装、改修に取り掛かる際はDATABASE_DESIGN.md, INFRASTRUCTURE.md, FUNCTIONALITY.mdを参照し仕様通りにすすめると。仕様通りに進められない場合（仕様変更が発生する作業）はユーザーに確認をし、ユーザーの許可を得た後に行いDATABASE_DESIGN.md, INFRASTRUCTURE.md, FUNCTIONALITY.mdを更新すること。
