# データ同期およびマスタデータ運用規定 (Revision 1)

## 1. `locations_seed.json` および `creatures_seed.json` の定義
これらのファイルは、開発・検証環境の初期構築、または緊急時の環境再構築（Disaster Recovery）のみを目的とした**「静的シードデータ」**である。

## 2. 運用原則と禁止事項

### 2.1 実環境（Production）での参照禁止
本番リリース完了後の通常運用において、モバイルアプリ（wedive-app）などのクライアントプログラムが、これらのシードファイルを直接読み込んでユーザーに提示することを厳禁とする。

### 2.2 真実のソース (Single Source of Truth)
本番環境におけるマスターデータの真実のソースは **Firestore（Live Database）** のみである。
* シードデータは過去の特定の断面を切り取ったものであり、時間の経過とともに Firestore 上の実データ（管理者が承認・修正したデータ）と乖離する。
* クライアントがシードデータを参照すると、Firestore 上の最新データと矛盾が生じ、ユーザーに混乱（情報の「幻覚」）を与えるリスクがあるため、これを避ける。

### 2.3 `seedFirestore` 機能の限定的使用
Web管理画面に実装されている `seedFirestore`（シードデータの流し込み機能）は、以下の非常に限られたシーンでのみ使用する。
*   新しい地域やエリアを一括で初期定義する必要がある初期構築時。
*   既存の運用データを破壊しないことが保証されている、完全に分離されたテスト環境の構築時。

## 3. 代替案（クライアントでのマスタ参照方法）

### 3.1 読み取りコスト最適化のための設計
Firestore への直接的な Read 課金を抑えつつ、かつシードデータ（幻覚）に頼らない仕組みとして、以下の「GCSミラーリング方式」を推奨する。
1.  **Source:** Firestore（承認済みデータ）
2.  **Sync:** Firestore の更新をフックして、または定期バッチによって最新のマスタデータを抽出する。
3.  **Distribution:** 抽出したデータを軽量な JSON/バイナリとして GCS (Cloud Storage) に配置。
4.  **Client:** モバイルアプリは GCS 上の「Firestore の鏡（最新の断面）」を読み取る。

これにより、データの整合性を Firestore で担保したまま、シードデータの弊害を除去し、運用コストを最小化する。
