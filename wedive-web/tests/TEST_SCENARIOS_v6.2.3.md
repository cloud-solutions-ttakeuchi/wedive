# テストシナリオ v6.2.3 - 検索フィルターの堅牢性向上

## 1. ポイント検索フィルターの堅牢性検証 (Web/App)
### 1.1 不完全なデータを含むポイントリストのフィルタリング (Web)
- **前提**: `points` 配列の中に、`name` 属性が `undefined` または `null` の要素、もしくは要素自体が `null` のものが含まれている状態を擬似的に作り出す（テスト用モックデータ）。
- **操作**:
    1. `HierarchicalPointSelector` が表示されている画面（ログ追加・編集等）を開く。
    2. キーワード検索窓に任意の文字を入力する。
- **期待結果**:
    - ブラウザがクラッシュ（`TypeError`）せず、正常にフィルタリングが行われること。
    - 不正なデータは検索結果から除外されるか、空文字として扱われること。

### 1.2 モバイル版ログ登録・編集時のスポット検索 (App)
- **前提**: アプリ版のスポットマスタに不完全なデータが含まれている。
- **操作**:
    1. ログ追加画面（`add.tsx`）または編集画面（`edit/[id].tsx`）でスポット検索窓に文字を入力する。
- **期待結果**:
    - アプリが強制終了（Crash）せず、検索結果が表示されるか、空の状態を維持すること。

## 2. 生物検索フィルターの堅牢性検証 (Web/App)
### 2.1 Pokedex および 生物セレクターでの検索 (Web)
- **前提**: 生物マスタに `name` や `tags` が欠落したデータが含まれている。
- **操作**:
    1. 図鑑（`Pokedex.tsx`）または生物選択（`SearchableCreatureSelector.tsx`）で検索を行う。
- **期待結果**:
    - `TypeError: Cannot read properties of undefined (reading 'toLowerCase')` が発生しないこと。
    - 特に `tags.some` 等の配列操作時に、`tags` 自体が undefined でもクラッシュしないこと。

## 3. 管理画面（Data Cleansing）での検索検証
- **操作**:
    1. 管理者ダッシュボードのクレンジング画面を開く。
    2. ポイントまたは生物の検索窓で絞り込みを行う。
- **期待結果**:
    - 正常にフィルタリングが動作し、コンソールにエラーが出ないこと。

## 4. データ型の強制変換の検証
- **前提**: 数値型のIDなどが文字列として期待されるプロパティに混入している。
- **期待結果**:
    - `String()` による変換により、数値に対しても `.toLowerCase()` が呼ばれず、型エラーが回避されること。
